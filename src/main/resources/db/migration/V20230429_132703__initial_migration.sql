-- User

CREATE TABLE API_USER (
    ID         INT          NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    USERNAME   VARCHAR(255) NOT NULL,
    FIRST_NAME VARCHAR(255) NOT NULL,
    LAST_NAME  VARCHAR(255) NOT NULL,
    PASSWORD   VARCHAR(255) NOT NULL
);

-- Role

CREATE TABLE API_ROLE (
    ID   INT          NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    NAME VARCHAR(255) NOT NULL
);

-- User Role Map

CREATE TABLE API_USER_ROLE_MAP (
    USER_ID INT NOT NULL,
    ROLE_ID INT NOT NULL,
    PRIMARY KEY (ROLE_ID, USER_ID),
    FOREIGN KEY (USER_ID) REFERENCES API_USER (ID),
    FOREIGN KEY (ROLE_ID) REFERENCES API_ROLE (ID)
);

-- Image

CREATE TABLE API_IMAGE (
    ID  INT          NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    UUID UUID,
    ALT VARCHAR(255) NOT NULL
);

-- Project

CREATE TABLE API_PROJECT (
    ID            INT          NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    TITLE         VARCHAR(255) NOT NULL,
    DESCRIPTION   VARCHAR(255) NOT NULL,
    CREATION_DATE DATE         NOT NULL,
    REPO_URL      VARCHAR(255) NOT NULL,
    DEMO_URL      VARCHAR(255) NOT NULL,
    FEATURED      BOOLEAN      NOT NULL,
    IMAGE_ID      INT,
    FOREIGN KEY (IMAGE_ID) REFERENCES API_IMAGE (ID)
);

-- Skill

CREATE TABLE API_SKILL (
    ID       INT          NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    NAME     VARCHAR(255) NOT NULL,
    IMAGE_ID INT,
    FOREIGN KEY (IMAGE_ID) REFERENCES API_IMAGE (id)
);

-- Project Skill Map

CREATE TABLE API_PROJECT_SKILL_MAP (
    PROJECT_ID INT NOT NULL,
    SKILL_ID   INT NOT NULL,
    PRIMARY KEY (PROJECT_ID, SKILL_ID),
    FOREIGN KEY (PROJECT_ID) REFERENCES API_PROJECT (ID),
    FOREIGN KEY (SKILL_ID) REFERENCES API_SKILL (ID)
);
